# DocuMind AI - 实施计划

> 版本: v1.0  
> 更新日期: 2026-01-26  
> 预计工期: 4-6 周

---

## 1. 项目概览

### 1.1 项目信息

| 项目     | 信息                                   |
| -------- | -------------------------------------- |
| 项目名称 | DocuMind AI - 智能文档问答系统         |
| 项目类型 | 深度学习课程结课项目                   |
| 技术栈   | Python + PyTorch + FastAPI + Streamlit |
| 部署方式 | 本地部署 / Docker                      |

### 1.2 开发里程碑

```
Week 1          Week 2          Week 3          Week 4          Week 5          Week 6
   │               │               │               │               │               │
   ▼               ▼               ▼               ▼               ▼               ▼
┌──────┐      ┌──────────┐   ┌──────────┐   ┌──────────┐   ┌──────────┐   ┌──────────┐
│ 环境  │      │ 文档处理  │   │ 向量检索  │   │ LLM集成  │   │ 前端开发  │   │ 测试部署  │
│ 搭建  │──────│ 模块开发  │───│ 模块开发  │───│ 问答服务  │───│ 界面完善  │───│ 文档完善  │
└──────┘      └──────────┘   └──────────┘   └──────────┘   └──────────┘   └──────────┘
   │               │               │               │               │               │
   └───────────────┴───────────────┴───────────────┴───────────────┴───────────────┘
                                        │
                                   完整可用的
                                   RAG问答系统
```

---

## 2. 分阶段实施计划

### 📅 第一阶段：环境搭建与基础框架 (Week 1)

**目标**：完成开发环境配置，搭建项目基础框架

#### 任务清单

| 序号 | 任务                | 说明                            | 预计耗时 |
| ---- | ------------------- | ------------------------------- | -------- |
| 1.1  | 创建项目目录结构    | 按技术设计文档创建目录          | 0.5h     |
| 1.2  | 配置依赖环境        | 创建 requirements.txt，安装依赖 | 1h       |
| 1.3  | 下载模型权重        | 下载 BGE、Qwen 模型             | 2h       |
| 1.4  | 搭建 FastAPI 框架   | 创建 API 基础结构               | 2h       |
| 1.5  | 搭建 Streamlit 框架 | 创建前端基础结构                | 2h       |
| 1.6  | 配置数据库          | SQLite + SQLAlchemy 配置        | 1.5h     |
| 1.7  | 配置日志系统        | 日志格式、级别、输出            | 1h       |

#### 交付物

- [x] 项目目录结构
- [ ] requirements.txt
- [ ] 基础 FastAPI 应用（健康检查接口）
- [ ] 基础 Streamlit 页面
- [ ] 数据库模型定义
- [ ] 日志配置

#### 验收标准

- [ ] `pip install -r requirements.txt` 成功
- [ ] `uvicorn src.api.main:app` 启动成功
- [ ] `streamlit run src/frontend/app.py` 启动成功
- [ ] 健康检查接口返回正常

---

### 📅 第二阶段：文档处理模块 (Week 2)

**目标**：实现文档上传、解析、分块功能

#### 任务清单

| 序号 | 任务               | 说明                           | 预计耗时 |
| ---- | ------------------ | ------------------------------ | -------- |
| 2.1  | 实现 PDF 解析器    | PyMuPDF 提取文本               | 2h       |
| 2.2  | 实现 DOCX 解析器   | python-docx 提取文本           | 1.5h     |
| 2.3  | 实现 TXT/MD 解析器 | 纯文本读取                     | 1h       |
| 2.4  | 实现解析器工厂     | 工厂模式创建解析器             | 1h       |
| 2.5  | 实现文本分块器     | RecursiveCharacterTextSplitter | 3h       |
| 2.6  | 实现文档上传接口   | POST /documents/upload         | 2h       |
| 2.7  | 实现文档状态管理   | 状态机 + 后台任务              | 3h       |
| 2.8  | 单元测试           | 解析器和分块器测试             | 2h       |

#### 交付物

- [ ] `src/parsers/` 目录完整实现
- [ ] `src/core/chunker.py`
- [ ] `src/api/routes/documents.py`
- [ ] `tests/test_parsers.py`
- [ ] `tests/test_chunker.py`

#### 验收标准

- [ ] PDF 文档成功解析并提取文本
- [ ] DOCX 文档成功解析
- [ ] 长文本正确分块（验证 chunk_size 和 overlap）
- [ ] 上传接口返回正确响应
- [ ] 单元测试全部通过

---

### 📅 第三阶段：向量检索模块 (Week 3)

**目标**：实现向量嵌入、索引构建、相似度检索

#### 任务清单

| 序号 | 任务             | 说明                        | 预计耗时 |
| ---- | ---------------- | --------------------------- | -------- |
| 3.1  | 实现嵌入模型封装 | Sentence Transformers 封装  | 2h       |
| 3.2  | 实现向量存储     | FAISS 索引管理              | 3h       |
| 3.3  | 实现检索器       | 向量检索 + 结果排序         | 2h       |
| 3.4  | 实现索引持久化   | 保存/加载 FAISS 索引        | 2h       |
| 3.5  | 实现知识库接口   | CRUD 接口                   | 3h       |
| 3.6  | 集成文档处理流程 | 上传 → 解析 → 分块 → 向量化 | 3h       |
| 3.7  | 单元测试         | 嵌入和检索测试              | 2h       |

#### 交付物

- [ ] `src/core/embedder.py`
- [ ] `src/core/vector_store.py`
- [ ] `src/core/retriever.py`
- [ ] `src/api/routes/knowledge_base.py`
- [ ] `tests/test_retriever.py`

#### 验收标准

- [ ] 文本成功转换为 1024 维向量
- [ ] 向量索引正确构建
- [ ] 相似度检索返回正确结果
- [ ] 索引可以保存和加载
- [ ] 知识库 CRUD 接口正常工作

---

### 📅 第四阶段：LLM 集成与问答服务 (Week 4)

**目标**：集成大语言模型，实现完整问答流程

#### 任务清单

| 序号 | 任务             | 说明                          | 预计耗时 |
| ---- | ---------------- | ----------------------------- | -------- |
| 4.1  | 实现 LLM 引擎    | Transformers 模型加载和推理   | 4h       |
| 4.2  | 实现流式生成     | TextIteratorStreamer 流式输出 | 2h       |
| 4.3  | 实现 Prompt 模板 | RAG Prompt 构建               | 1.5h     |
| 4.4  | 实现问答服务     | 检索 + 生成整合               | 3h       |
| 4.5  | 实现对话管理     | 多轮对话上下文                | 2h       |
| 4.6  | 实现问答接口     | POST /chat, /chat/stream      | 3h       |
| 4.7  | 实现量化支持     | INT4/INT8 量化                | 2h       |
| 4.8  | 集成测试         | 端到端问答测试                | 2h       |

#### 交付物

- [ ] `src/core/llm_engine.py`
- [ ] `src/core/chat_service.py`
- [ ] `src/api/routes/chat.py`
- [ ] Prompt 模板配置
- [ ] 集成测试脚本

#### 验收标准

- [ ] LLM 模型成功加载
- [ ] 流式生成正常工作
- [ ] 问答接口返回合理答案
- [ ] 答案包含来源引用
- [ ] 多轮对话上下文保持

---

### 📅 第五阶段：前端开发 (Week 5)

**目标**：完成 Streamlit 前端界面

#### 任务清单

| 序号 | 任务             | 说明                   | 预计耗时 |
| ---- | ---------------- | ---------------------- | -------- |
| 5.1  | 设计页面布局     | 侧边栏 + 主内容区      | 2h       |
| 5.2  | 实现知识库管理页 | 创建、选择、删除知识库 | 3h       |
| 5.3  | 实现文档上传组件 | 拖拽上传、进度显示     | 3h       |
| 5.4  | 实现文档列表组件 | 展示文档状态           | 2h       |
| 5.5  | 实现对话界面     | 聊天气泡、输入框       | 4h       |
| 5.6  | 实现流式显示     | 打字机效果             | 2h       |
| 5.7  | 实现来源引用展示 | 可折叠的引用卡片       | 2h       |
| 5.8  | 样式美化         | CSS 自定义样式         | 2h       |

#### 交付物

- [ ] `src/frontend/app.py`
- [ ] `src/frontend/pages/*.py`
- [ ] `src/frontend/components/*.py`
- [ ] 自定义 CSS 样式

#### 验收标准

- [ ] 页面布局合理美观
- [ ] 文档上传功能正常
- [ ] 对话界面流畅
- [ ] 流式输出显示正常
- [ ] 来源引用清晰可见

---

### 📅 第六阶段：测试与部署 (Week 6)

**目标**：完成测试、优化、部署和文档

#### 任务清单

| 序号 | 任务         | 说明                 | 预计耗时 |
| ---- | ------------ | -------------------- | -------- |
| 6.1  | 功能测试     | 全流程功能验证       | 4h       |
| 6.2  | 性能测试     | 响应时间、并发测试   | 3h       |
| 6.3  | Bug 修复     | 修复发现的问题       | 4h       |
| 6.4  | 性能优化     | 根据测试结果优化     | 3h       |
| 6.5  | Docker 部署  | Dockerfile + Compose | 3h       |
| 6.6  | 编写使用文档 | 用户使用指南         | 2h       |
| 6.7  | 录制演示视频 | 功能演示             | 1h       |

#### 交付物

- [ ] 测试报告
- [ ] `docker/Dockerfile`
- [ ] `docker/docker-compose.yaml`
- [ ] 用户使用文档
- [ ] 演示视频

#### 验收标准

- [ ] 所有功能正常工作
- [ ] 性能指标达到要求
- [ ] Docker 部署成功
- [ ] 文档完整清晰

---

## 3. 风险与缓解

| 风险         | 可能性 | 影响 | 缓解措施                   |
| ------------ | ------ | ---- | -------------------------- |
| 模型下载慢   | 高     | 中   | 使用镜像站、提前下载       |
| 显存不足     | 高     | 高   | 使用量化模型、CPU 推理备选 |
| 文档解析异常 | 中     | 中   | 完善错误处理、降级策略     |
| 开发进度延迟 | 中     | 中   | 优先核心功能、敏捷迭代     |

---

## 4. 资源需求

### 4.1 硬件要求

| 配置 | 最低要求 | 推荐配置               |
| ---- | -------- | ---------------------- |
| CPU  | 4 核     | 8 核                   |
| 内存 | 16 GB    | 32 GB                  |
| 显卡 | -        | NVIDIA RTX 3090 / 4090 |
| 显存 | -        | 24 GB                  |
| 存储 | 50 GB    | 100 GB SSD             |

### 4.2 模型列表

| 模型                          | 大小    | 用途     | 下载地址                 |
| ----------------------------- | ------- | -------- | ------------------------ |
| bge-large-zh-v1.5             | ~1.3 GB | 文本嵌入 | HuggingFace              |
| Qwen2.5-7B-Instruct           | ~14 GB  | 语言生成 | HuggingFace / ModelScope |
| Qwen2.5-7B-Instruct-GPTQ-Int4 | ~4 GB   | 量化版本 | HuggingFace              |

---

## 5. 技能要求对照

本项目将运用课程中学习的以下技术：

| 课程阶段 | 知识点           | 项目应用           |
| -------- | ---------------- | ------------------ |
| Phase 3  | PyTorch 基础     | 模型加载、张量操作 |
| Phase 7  | Transformer 架构 | 理解 LLM 原理      |
| Phase 7  | BERT/GPT 微调    | 模型推理           |
| Phase 11 | 词嵌入           | 理解 Embedding     |
| Phase 11 | NLP 任务         | 文本处理           |
| Phase 12 | LLM 架构         | 大模型推理         |
| Phase 12 | 量化技术         | 模型优化           |
| Phase 12 | 推理优化         | 性能提升           |

---

## 6. 检查清单

### 开发开始前

- [ ] 阅读并理解 PRD.md
- [ ] 阅读并理解 TECHNICAL_DESIGN.md
- [ ] 阅读并理解 API_DESIGN.md
- [ ] 确认硬件配置满足要求
- [ ] 下载所需模型权重

### 每阶段完成后

- [ ] 代码通过所有单元测试
- [ ] 功能符合设计文档要求
- [ ] 代码已提交到 Git
- [ ] 更新项目 README

### 项目完成后

- [ ] 所有功能正常工作
- [ ] 文档完整
- [ ] 演示视频录制完成
- [ ] 项目可独立部署运行

---

## 附录：每日开发建议

### 开发流程

```
1. 每天开始前：
   - 查看今天的任务
   - 确认依赖任务已完成

2. 开发过程中：
   - 小步迭代，频繁测试
   - 遇到问题及时记录

3. 每天结束时：
   - 提交代码
   - 更新任务进度
   - 记录遇到的问题
```

### Git 提交规范

```
feat: 新功能
fix: Bug 修复
docs: 文档更新
refactor: 代码重构
test: 测试相关
chore: 构建/工具相关

示例：
feat: 实现 PDF 文档解析器
fix: 修复文本分块边界问题
docs: 更新 API 文档
```
